[package]
name = "sklears-simd"
version.workspace = true
authors.workspace = true
license.workspace = true
edition.workspace = true
rust-version.workspace = true
repository.workspace = true
homepage.workspace = true
readme = "README.md"
keywords.workspace = true
categories.workspace = true
description = "High-performance SIMD acceleration primitives for the Sklears machine learning ecosystem"

[dependencies]
# Core dependencies
sklears-core = { workspace = true }

# âœ… SciRS2 Policy compliance - Use SciRS2 as scientific computing foundation
scirs2-core = { workspace = true }
scirs2-autograd = { workspace = true }
scirs2-linalg = { workspace = true }

# SIMD support - using stable SIMD features
once_cell = { workspace = true }

# Complex numbers for quantum computing
num = "0.4"

# Optional dependencies
rayon = { workspace = true, optional = true }
libm = { workspace = true, optional = true }
spin = { workspace = true, optional = true }

# GPU acceleration dependencies (optional) - Disabled for macOS compatibility
# cudarc = { version = "0.11", optional = true }
# opencl3 = { version = "0.9", optional = true }

[features]
default = []
parallel = ["rayon"]
nightly = []
no-std = ["libm", "spin"]

# Note: no-std and std are mutually exclusive by design (see #![cfg_attr(feature = "no-std", no_std)] in lib.rs)
# Test with: cargo test --features parallel (for std mode with parallelism)
# Test no-std: cargo test --no-default-features --features no-std
# DO NOT use --all-features as it enables conflicting no-std and std modes simultaneously
# cuda = ["cudarc"]  # Disabled for macOS compatibility
# opencl = ["opencl3"]  # Disabled for macOS compatibility  
# gpu = ["cuda", "opencl"]  # Disabled for macOS compatibility

[dev-dependencies]
criterion = { workspace = true }
approx = { workspace = true }

[[bench]]
name = "simd_benchmarks"
harness = false

[[bench]]
name = "comprehensive_benchmarks"
harness = false

# Note: Profiles are configured at workspace level in root Cargo.toml
# following workspace policy